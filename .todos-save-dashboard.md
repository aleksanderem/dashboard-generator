# Save Dashboard Feature - Implementation Todos

## Todo List

- [ ] **Todo 1**: Add saveDashboard() and updateDashboard() API functions to api.js
  - Create saveDashboard(name, dashboard, theme) function for POST /api/dashboards
  - Create updateDashboard(id, name, dashboard, theme) function for PUT /api/dashboards/:id
  - Export both functions

- [ ] **Todo 2**: Add Save button to DashboardPreview toolbar
  - Import Save icon from lucide-react
  - Add button next to Export PNG button in toolbar (around line 428)
  - Button should show "Save Dashboard" or "Update Dashboard" based on dashboardId prop
  - Style: teal theme matching existing buttons
  - Click handler: open save modal

- [ ] **Todo 3**: Create Save Dashboard modal component in DashboardPreview
  - Modal overlay with backdrop
  - Form with: dashboard name input (required), theme display (read-only), widget count display
  - Validation: disable Save button if name is empty
  - Cancel button (close modal, gray style)
  - Save button (teal, calls API)
  - Show loading state during save
  - Error handling: display error message in modal

- [ ] **Todo 4**: Implement save logic with API integration
  - Call saveDashboard() for new dashboards
  - Call updateDashboard() for existing dashboards (when dashboardId exists)
  - Pass current dashboard data, theme, and name to API
  - Handle success: show toast notification, close modal, trigger onDashboardSaved callback
  - Handle error: show error in modal, keep modal open

- [ ] **Todo 5**: Create success toast notification component
  - Green background with checkmark icon
  - Message: "Dashboard saved successfully!"
  - Position: top-right corner
  - Auto-dismiss after 3 seconds
  - Smooth fade in/out animations

- [ ] **Todo 6**: Update DashboardPreview props and state management
  - Add dashboardId prop (optional)
  - Add onDashboardSaved callback prop
  - Add state for: showSaveModal, dashboardName, isSaving, saveError, showSuccessToast, savedDashboardId
  - Update Save button text based on dashboardId existence

- [ ] **Todo 7**: Update App.jsx to support dashboard ID tracking
  - Add loadedDashboardId state
  - Pass dashboardId prop to DashboardPreview
  - Implement onDashboardSaved callback to store dashboard ID
  - Update handleLoadDashboard to extract and store dashboard ID

